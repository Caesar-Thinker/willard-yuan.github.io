---
layout: default
---

<!--添加侧边菜单-->
<!--<link rel="stylesheet" href="{{site.url}}/css/side-menu.css" />
 <style>
        .side-menu {
            width: 200px;
            top: 150px;
            right: 0;
        }
 </style>
<script type="text/javascript" src="{{site.url}}/js/jquery.min.js"></script>
<script type="text/javascript" src="{{site.url}}/js/jquery.side.menu.js"></script>
<script>
$(function () {
            $('#main').sideMenu({
                hs: ['h2']
            });
        });
</script>-->

{% if page.photo %}
<div class="post-photo" style="background-image: url('/images/posts/{{ page.photo }}')">

</div>
{% endif %}

<article>
  <h1 class="inner">
    {{ page.title }}
  </h1>

  <p class="meta">{{ page.date | date: "%A %-d %B %Y" }}</p>

  {% if page.french %}
  <div class="suggest-translate">
    This post is in French. You can try to
    <a href="http://translate.google.com/translate?sl=fr&amp;tl=en&amp;u=http://sebastien.saunier.me{{ page.url }}">
      google translate it</a>.
  </div>
  {% endif %}
  
  <div id="container">
  	<div id="menu"></div>
  	<div id="main" class="span9">
  		<div class="post">
  			{{ content }}
  		</div>
  	</div>
  </div>
</article>

{% comment %} 利用split 来形成一个空数组, 这里主要是我不知道liquid如何直接写array... {% endcomment %} 
{% assign postsAfterFilter = '-' | split: "-" %}
{% for post in site.related_posts %}
  {% assign commonTagCount = 0 %}
  {% if post.title != page.title and post.series != page.series %}
    {% for tag in post.tags %} 
      {% if page.tags contains tag %}

        {% comment %} 统计共同的tag的数目, 用来后面的筛选以及排序用 {% endcomment %} 
        {% assign commonTagCount = commonTagCount | plus: 1 %}
      {% endif %}
    {% endfor %}
    {% if commonTagCount > 0 %}

      {% comment %} 将符合条件的post放入一个新的数组之中 {% endcomment %} 
      {% assign postsAfterFilter = postsAfterFilter | push: post %}
    {% endif %}
  {% endif %}
{% endfor %}

{% comment %} 容错判断, 确保有相关文章的时候再展示相关文章 {% endcomment %} 
{% if postsAfterFilter.size > 0 %}
<div class="relatedposts">
  <h2>Related Posts:</h2>
  <ul class="article-list">
  {% for post in postsAfterFilter limit: 5 %}
    <li><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></li>
  {% endfor %}
  </ul>
</div>
{% endif %}

<section class="comments inner">
<!-- JiaThis Button BEGIN -->
<div class="jiathis_custom">
<div class="jiathis_style">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->
</section>

<section class="post-footer-self-promotion inner">
	<!--<a href="https://twitter.com/intent/follow?screen_name=ssaunier" target="_blank">
	<img class="avatar" src="/images/YongYuan.png" />
	</a>-->
	<p>
	感谢您的阅读! 如果您对我所分享的感兴趣，可以在fellow<a href="http://weibo.com/u/2912262051">我的微博</a> ，或者订阅我的文字,
	<form action="http://saunier.us8.list-manage.com/subscribe/post?u=3e666bd315f84f1bbdfe80c3b&amp;id=0494cf26c5" method="post"target="_blank">
	  <input type="email" class="form-control" name="EMAIL" placeholder="您的email邮箱"
		><input type="submit" value="Subscribe to my newsletter" >
	  Fear not, I hate spam too.
	</form>
	
	</p>

	<div id="more-articles">
	  {% if has_res %}
		<p>Since you scrolled this far, you might as well take a look at some other things I wrote !</p>
		<ul>
		  {{ res }}
		</ul>
		<p>
		  ... or <a href="/blog">some other article</a> from my blog.
		  Oh and I also take <a href="/photos">pictures</a>!
		</p>
	  {% else %}
	  <p>
		如果你喜欢我的文章的话, 可以查看<a href="/blog">我的其它系列的博文</a>.
	  </p>
	  {% endif %}
	</div>
  </div>
</section>
<div class="separator"></div>
<section class="comments inner">
<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"yuanyong"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->

<!-- Disqus Comment BEGIN -->
  <!--<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'yongyuan'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
<!-- Disqus Comment END -->

</section>
